{% extends "base.html" %}

{% block title %}Matchup | Login{% endblock %}

{% block content %}

<style>
  /* 1. Hintergrund für die GANZE Seite (body) */
  body {
    /* Dein Stadion-Verlauf */
    background: radial-gradient(circle at center, #1e4d2b 0%, #0a2112 100%) !important;
    min-height: 100vh;
  }

  /* 2. Die Navbar transparent machen, damit auf dem Grün liegt */
  .navbar-football {
    background: transparent !important; /* Kein eigener Hintergrund */
    box-shadow: none !important; /* Kein Schatten */
  }

  /* 3. Der Wrapper: Sorgt nur dafür, dass die Karte mittig sitzt */
  .login-wrapper {
    display: flex;
    justify-content: center; /* Horizontal mittig */
    align-items: center;     /* Vertikal mittig */
    
    /* WICHTIG: Höhe berechnen! */
    /* 100% vom Bildschirm (vh) MINUS die Höhe der Navbar (ca. 76px) */
    min-height: calc(100vh - 76px); 
    padding-bottom: 50px;
  }

  /* Das Design der Karte bleibt gleich */
  .login-card {
    background: rgba(255, 255, 255, 0.98);
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.4);
    padding: 2.5rem 2rem;
    width: 100%;
    max-width: 400px;
    position: relative;
    overflow: hidden;
  }

  /* Grüner Balken oben */
  .login-card::before {
    content: "";
    position: absolute;
    top: 0; left: 0; width: 100%; height: 6px;
    background: linear-gradient(90deg, #198754, #a3cfbb);
  }

  .form-control:focus {
    border-color: #198754;
    box-shadow: 0 0 0 0.25rem rgba(25, 135, 84, 0.25);
  }

  .btn-football {
    background-color: #198754;
    border: none;
    color: white;
    font-weight: 700;
  }
  .btn-football:hover {
    background-color: #146c43;
    color: white;
  }
</style>

<div class="login-wrapper">
    
    <main class="login-card text-center">
      <form method="POST" action="{{ url_for('login') }}">
        {{ form.csrf_token }}
        
        <div class="mb-3">
            <i class="bi bi-shield-lock-fill" style="font-size: 3rem; color: #198754;"></i>
        </div>
        
        <h1 class="h3 mb-1 fw-bold">Anpfiff!</h1>
        <p class="text-muted mb-4 small">Logge dich ein für das nächste Match.</p>

        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }} py-2 text-start small">{{ message }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <div class="form-floating mb-3">
          {% if form.email.errors %}
            {{ form.email(class="form-control is-invalid", placeholder="Email") }}
          {% else %}
            {{ form.email(class="form-control", placeholder="Email") }}
          {% endif %}
          <label>Email Adresse</label>
        </div>

        <div class="form-floating mb-3">
          {% if form.password.errors %}
            {{ form.password(class="form-control is-invalid", placeholder="Passwort") }}
          {% else %}
            {{ form.password(class="form-control", placeholder="Passwort") }}
          {% endif %}
          <label>Passwort</label>
        </div>

        {% if form.remember %}
        <div class="text-start mb-3">
            <div class="form-check">
                {{ form.remember(class="form-check-input") }}
                <label class="form-check-label small text-muted">Angemeldet bleiben</label>
            </div>
        </div>
        {% endif %}

        <button class="btn btn-football w-100 py-2 btn-lg shadow-sm" type="submit">
            Einwechseln
        </button>
        
        <div class="mt-4 pt-3 border-top d-flex justify-content-between align-items-center">
            <small class="text-muted">Noch kein Vertrag?</small>
            <a href="{{ url_for('register') }}" class="btn btn-sm btn-outline-secondary rounded-pill px-3">Registrieren</a>
        </div>
      </form>
    </main>

</div>
{% endblock %}