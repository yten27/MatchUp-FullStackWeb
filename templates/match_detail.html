{% extends "base.html" %}
{% block title %}
Match Detail
{% endblock %}

{% block content %}
<div class= "content">
    <!--Match Header-->
    <div class="mb-4">
        <h2>{{ match.title }}</h2>
    <p>
      {{ match.location }} <br>
      {{ match.match_time }}
    </p>
    </div>
    <!-- Extra Info-->

</div>
<div class="mb-4">
    <p>Preis pro Person: {{ match.price }} â‚¬</p>
    <p>Erstellt von: {{ match.created_by }}</p>
  </div>

  <hr>

  
  <!-- Teilnehmerliste -->
  <div class="mb-4">
    <h4>Teilnehmer</h4>
    <ul>
      {% for user in participants %}
        <li>{{ user.name }}</li>
      {% endfor %}
    </ul>
  </div>
<hr>
<!-- Teilnehmer Status -->
<div class="mb-3">
    {% if is_owner %}
      <p><strong>Du bist der Host dieses Matches.</strong></p>
    {% elif is_joined %}
      <p><strong>Du nimmst an dem Spiel teil.</strong></p>
    {% else %}
      <p><strong>Du bist noch nicht beigetreten.</strong></p>
    {% endif %}
  </div>

  <!--Buttons-->
  <div class="mb-4">
    <!-- Join Button -->
    {% if not is_joined %}
      <form method="post" action="{{ url_for('join_match', id=match.id) }}">
        <button class="btn btn-success">Join</button>
      </form>
    {% endif %}
  
    <!-- Leave Button -->
    {% if is_joined and not is_owner %}
      <form method="post" action="{{ url_for('leave_match', id=match.id) }}">
        <button class="btn btn-warning">Leave</button>
      </form>
    {% endif %}
  
    <!-- Cancel Button (for the host) -->
    {% if is_owner %}
      <form method="post" action="{{ url_for('cancel_match', id=match.id) }}">
        <button class="btn btn-danger">Cancel Match</button>
      </form>
    {% endif %}
  </div>
  <hr>
  
  {% endblock %}